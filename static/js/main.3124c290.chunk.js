(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{26:function(n,t,e){},27:function(n,t,e){"use strict";e.r(t);var r=e(1),c=e(0),a=e(13),i=e.n(a),o=e(5),u=e(2),s=e(6),l=e(4),j=Object(c.createContext)(null),b=Object(c.createContext)(null),d="token",f=function(n){return localStorage.setItem(d,n)},x=function(){return localStorage.getItem(d)},p="https://student-json-api.lidemy.me",O=function(){return fetch("".concat(p,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},h=function(n,t){return fetch("".concat(p,"/posts?_page=").concat(n,"&_limit=").concat(t,"&_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},v=function(){var n=x();return fetch("".concat(p,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},g=e(3);function m(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  margin: 0 30px;\n  height: 64px;\n"]);return m=function(){return n},n}function y(){var n=Object(u.a)(["\n  font-size: 32px;\n  color: #017a75;\n"]);return y=function(){return n},n}function w(){var n=Object(u.a)(["\n  display: flex;\n"]);return w=function(){return n},n}function k(){var n=Object(u.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  box-shadow: 0px 1px 10px rgba(0, 0, 0, 0.5);\n  padding: 0px 5vw;\n  background: white;\n"]);return k=function(){return n},n}var S=g.a.div(k()),C=g.a.div(w()),E=Object(g.a)(s.b)(y()),L=Object(g.a)(s.c)(m());function z(){var n=Object(c.useContext)(j),t=n.user,e=n.setUser,a=Object(l.g)();return Object(r.jsxs)(S,{children:[Object(r.jsx)(E,{to:"/",children:"React Blog"}),Object(r.jsxs)(C,{children:[Object(r.jsx)(L,{to:"about-me",children:"\u95dc\u65bc\u6211"}),Object(r.jsx)(L,{to:"posts",children:"\u6587\u7ae0\u5217\u8868"}),t&&Object(r.jsx)(L,{to:"new-post",children:"\u767c\u4f48\u6587\u7ae0"}),t&&Object(r.jsx)(L,{to:"/",onClick:function(){f(""),e(null),alert("\u767b\u51fa\u6210\u529f"),a("/")},children:"\u767b\u51fa"}),!t&&Object(r.jsx)(L,{to:"login",children:"\u767b\u5165"})]})]})}function N(){return(N=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}function T(n,t){if(null==n)return{};var e,r,c=function(n,t){if(null==n)return{};var e,r,c={},a=Object.keys(n);for(r=0;r<a.length;r++)e=a[r],t.indexOf(e)>=0||(c[e]=n[e]);return c}(n,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)e=a[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(c[e]=n[e])}return c}var A=c.createElement("g",null,c.createElement("circle",{cx:60,cy:50,r:4,fill:"#d7adb0"},c.createElement("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",values:"95;35",keyTimes:"0;1",begin:"-0.67s"}),c.createElement("animate",{attributeName:"fill-opacity",repeatCount:"indefinite",dur:"1s",values:"0;1;1",keyTimes:"0;0.2;1",begin:"-0.67s"})),c.createElement("circle",{cx:60,cy:50,r:4,fill:"#d7adb0"},c.createElement("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",values:"95;35",keyTimes:"0;1",begin:"-0.33s"}),c.createElement("animate",{attributeName:"fill-opacity",repeatCount:"indefinite",dur:"1s",values:"0;1;1",keyTimes:"0;0.2;1",begin:"-0.33s"})),c.createElement("circle",{cx:60,cy:50,r:4,fill:"#d7adb0"},c.createElement("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",values:"95;35",keyTimes:"0;1",begin:"0s"}),c.createElement("animate",{attributeName:"fill-opacity",repeatCount:"indefinite",dur:"1s",values:"0;1;1",keyTimes:"0;0.2;1",begin:"0s"}))),I=c.createElement("g",{transform:"translate(-15 0)"},c.createElement("path",{d:"M50 50L20 50A30 30 0 0 0 80 50Z",fill:"#d7d3d0",transform:"rotate(90 50 50)"}),c.createElement("path",{d:"M50 50L20 50A30 30 0 0 0 80 50Z",fill:"#d7d3d0"},c.createElement("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",values:"0 50 50;45 50 50;0 50 50",keyTimes:"0;0.5;1"})),c.createElement("path",{d:"M50 50L20 50A30 30 0 0 1 80 50Z",fill:"#d7d3d0"},c.createElement("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",values:"0 50 50;-45 50 50;0 50 50",keyTimes:"0;0.5;1"})));function P(n,t){var e=n.title,r=n.titleId,a=T(n,["title","titleId"]);return c.createElement("svg",N({style:{margin:"auto",background:"none",display:"block",shapeRendering:"auto"},width:"136px",height:"136px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":r},a),e?c.createElement("title",{id:r},e):null,A,I)}var R=c.forwardRef(P);e.p;function F(){var n=Object(u.a)(["\n  padding-top: 150px;\n  margin: 0 auto;\n  text-align: center;\n"]);return F=function(){return n},n}var M=g.a.div(F());function B(){return Object(r.jsx)(M,{children:Object(r.jsx)(R,{})})}function D(){var n=Object(u.a)(["\n  margin-top: 20px;\n"]);return D=function(){return n},n}function _(){var n=Object(u.a)(["\n  padding-bottom: 20px;\n  color: #707070;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n"]);return _=function(){return n},n}function J(){var n=Object(u.a)(["\n  font-size: 24px;\n"]);return J=function(){return n},n}function U(){var n=Object(u.a)(["\n  padding: 20px;\n  margin: 10px 0;\n  justify-content: space-between;\n"]);return U=function(){return n},n}var Z=g.a.div(U()),V=g.a.h2(J()),Y=g.a.div(_()),H=g.a.div(D());function q(n){var t=n.post;return Object(r.jsxs)(Z,{children:[Object(r.jsx)(V,{to:"post/".concat(t.id),children:t.title}),Object(r.jsx)(Y,{children:new Date(t.createdAt).toLocaleString()}),Object(r.jsx)(H,{children:t.body})]})}function G(){var n=Object(u.a)(["\n  margin-bottom: 0;\n"]);return G=function(){return n},n}function K(){var n=Object(u.a)(["\n  margin: 0 10vw;\n  min-height: calc(100vh - 123px);\n"]);return K=function(){return n},n}var Q=g.a.div(K()),W=g.a.h1(G());function X(n){return n.posts.slice(0,5).map((function(n){return Object(r.jsx)(q,{post:n},n.id)}))}function $(){var n=Object(c.useContext)(b),t=n.isLoading,e=n.setIsLoading,a=Object(c.useState)([]),i=Object(o.a)(a,2),u=i[0],s=i[1];return Object(c.useEffect)((function(){e(!0),O().then((function(n){return s(n)})).then((function(){e(!1)}))}),[e]),Object(r.jsx)(Q,{children:t?Object(r.jsx)(B,{}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(W,{children:"\u6700\u65b0\u6587\u7ae0"}),Object(r.jsx)(X,{posts:u})]})})}function nn(){var n=Object(u.a)(["\n  padding: 5px 10px;\n  margin: 10px auto;\n  border-radius: 10px;\n  border: transparent;\n  background: #909090;\n  color: white;\n  outline: none;\n  cursor: pointer;\n  font-size: 16px;\n  box-shadow: 0px 5px 2px #707070;\n  &:active {\n    transform: translateY(2px);\n    box-shadow: 0px 3px 2px #888888;\n  }\n"]);return nn=function(){return n},n}var tn=g.a.button(nn());function en(){var n=Object(u.a)(["\n  margin-top: 10px;\n"]);return en=function(){return n},n}function rn(){var n=Object(u.a)(["\n  border: none;\n  outline: none;\n  padding: 5px 10px;\n  border-bottom: 1px solid #909090;\n  background: transparent;\n  letter-spacing: 5px;\n  color: #808080;\n  font-size: 16px;\n"]);return rn=function(){return n},n}function cn(){var n=Object(u.a)(["\n  margin: 20px 0;\n"]);return cn=function(){return n},n}function an(){var n=Object(u.a)(["\n  width: 360px;\n  height: 270px;\n  margin: 20px auto 0;\n  padding: 20px;\n  background: whitesmoke;\n  transition: all linear 0.2s;\n  box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);\n  &:hover {\n    transition: all linear 0.2s;\n    box-shadow: 1px 2px 6px rgba(0, 0, 0, 0.5);\n  }\n"]);return an=function(){return n},n}function on(){var n=Object(u.a)(["\n  color: red;\n  margin: 10px 0;\n"]);return on=function(){return n},n}function un(){var n=Object(u.a)(["\n  font-size: 24px;\n"]);return un=function(){return n},n}function sn(){var n=Object(u.a)(["\n  margin: 0 10vw;\n  min-height: calc(100vh - 143px);\n"]);return sn=function(){return n},n}var ln=g.a.div(sn()),jn=g.a.h1(un()),bn=g.a.div(on()),dn=g.a.form(an()),fn=g.a.div(cn()),xn=g.a.input(rn()),pn=g.a.div(en());function On(){var n=Object(c.useContext)(j).setUser,t=Object(c.useState)(""),e=Object(o.a)(t,2),a=e[0],i=e[1],u=Object(c.useState)(""),s=Object(o.a)(u,2),b=s[0],d=s[1],x=Object(c.useState)(!1),O=Object(o.a)(x,2),h=O[0],g=O[1],m=Object(c.useState)(null),y=Object(o.a)(m,2),w=y[0],k=y[1],S=Object(l.g)();return Object(r.jsx)(ln,{children:Object(r.jsxs)(dn,{onSubmit:function(t){t.preventDefault(),function(n,t){return fetch("".concat(p,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(a,b).then((function(t){if(0===t.ok)return k(t.message);f(t.token),v().then((function(t){if(1!==t.ok)return f(null),k(t.toString);n(t.data),S("/")})).catch((function(n){alert(n),S("/")}))})).catch((function(n){return k(n)}))},children:[Object(r.jsx)(jn,{children:"\u8acb\u767b\u5165\u90e8\u843d\u683c"}),Object(r.jsxs)(fn,{children:["\u5e33\u865f\uff1a"," ",Object(r.jsx)(xn,{value:a,onChange:function(n){return i(n.target.value)},onFocus:function(){return k(null)}})]}),Object(r.jsxs)(fn,{children:["\u5bc6\u78bc\uff1a"," ",Object(r.jsx)(xn,{type:h?"text":"password",value:b,onChange:function(n){return d(n.target.value)},onFocus:function(){return k(null)}}),Object(r.jsxs)(pn,{children:[Object(r.jsx)("input",{type:"checkbox",onClick:function(){return g(!h)},id:"password"}),Object(r.jsx)("label",{htmlFor:"password",children:"\u986f\u793a\u5bc6\u78bc "})]})]}),Object(r.jsx)(tn,{children:"\u767b\u5165"}),w&&Object(r.jsx)(bn,{children:w})]})})}function hn(){var n=Object(u.a)(["\n  margin-bottom: 10px;\n"]);return hn=function(){return n},n}function vn(){var n=Object(u.a)(["\n  margin: 0 15px;\n"]);return vn=function(){return n},n}function gn(){var n=Object(u.a)(["\n  display: flex;\n"]);return gn=function(){return n},n}function mn(){var n=Object(u.a)(["\n  margin-top: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return mn=function(){return n},n}var yn=g.a.div(mn()),wn=g.a.div(gn()),kn=g.a.a(vn()),Sn=g.a.div(hn());function Cn(n){var t=n.pagination,e=n.limit,a=n.getData,i=n.setValue,u=n.totalPostsNumber,s=Object(c.useState)(1),l=Object(o.a)(s,2),j=l[0],b=l[1],d=function(n){return function(){a(n,e).then((function(n){return i(n)})),b(n)}};return Object(r.jsxs)(yn,{children:[Object(r.jsx)(Sn,{children:"\u5171\u6709 ".concat(u," \u7bc7\u6587\u7ae0\uff0c\u76ee\u524d\u5728\u7b2c ").concat(j," \u9801")}),Object(r.jsx)(wn,{children:t.map((function(n){return Object(r.jsx)(kn,{onClick:d(n),children:n},n)}))})]})}function En(){var n=Object(u.a)(["\n  color: #707070;\n"]);return En=function(){return n},n}function Ln(){var n=Object(u.a)(["\n  font-size: 20px;\n"]);return Ln=function(){return n},n}function zn(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 20px;\n  display: flex;\n  algin-items: flex-end;\n  justify-content: space-between;\n"]);return zn=function(){return n},n}function Nn(){var n=Object(u.a)(["\n  margin: 0 10vw;\n  height: calc(100vh - 123px);\n"]);return Nn=function(){return n},n}var Tn=g.a.div(Nn()),An=g.a.div(zn()),In=Object(g.a)(s.b)(Ln()),Pn=g.a.div(En());function Rn(n){var t=n.post;return Object(r.jsxs)(An,{children:[Object(r.jsx)(In,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(Pn,{children:new Date(t.createdAt).toLocaleString()})]})}function Fn(){var n=Object(c.useContext)(b),t=n.isLoading,e=n.setIsLoading,a=Object(c.useState)([]),i=Object(o.a)(a,2),u=i[0],s=i[1],l=Object(c.useState)(),j=Object(o.a)(l,2),d=j[0],f=j[1],x=Object(c.useState)([]),p=Object(o.a)(x,2),v=p[0],g=p[1];return Object(c.useEffect)((function(){e((function(){return!0})),O().then((function(n){var t=Math.ceil(n.length/5);f(n.length),g(Array.from({length:t}).map((function(n,t){return t+1}))),h(1,5).then((function(n){s(n)})).then((function(){e((function(){return!1}))}))}))}),[e]),Object(r.jsx)(Tn,{children:t?Object(r.jsx)(B,{}):Object(r.jsxs)(r.Fragment,{children:[" ",u[0]&&u.map((function(n){return Object(r.jsx)(Rn,{post:n},n.id)})),Object(r.jsx)(Cn,{totalPostsNumber:d,pagination:v,limit:5,getData:h,setValue:s})]})})}function Mn(){var n=Object(u.a)(["\n  margin: 0 10vw;\n  min-height: calc(100vh - 123px);\n"]);return Mn=function(){return n},n}var Bn=g.a.div(Mn());function Dn(){var n=Object(c.useContext)(b),t=n.isLoading,e=n.setIsLoading,a=Object(c.useState)(null),i=Object(o.a)(a,2),u=i[0],s=i[1],j=Object(l.h)().id;return Object(c.useEffect)((function(){e(!0),function(n){return fetch("".concat(p,"/posts?id=").concat(n)).then((function(n){return n.json()}))}(j).then((function(n){return s(n[0])})),e(!1)}),[j,e]),Object(r.jsx)(Bn,{children:!t&&u?Object(r.jsx)(q,{post:u}):Object(r.jsx)(B,{})})}function _n(){var n=Object(u.a)(["\n  margin: 20px 0 10px 0;\n  color: #909090;\n"]);return _n=function(){return n},n}function Jn(){var n=Object(u.a)(["\n  color: red;\n  font-size: 16px;\n"]);return Jn=function(){return n},n}function Un(){var n=Object(u.a)(["\n  padding: 5px;\n  border-radius: 5px;\n  border: 1px solid #808080;\n  outline: none;\n  height: 150px;\n  font-size: 16px;\n"]);return Un=function(){return n},n}function Zn(){var n=Object(u.a)(["\n  padding: 5px;\n  border-radius: 5px;\n  border: 1px solid #808080;\n  outline: none;\n  font-size: 16px;\n"]);return Zn=function(){return n},n}function Vn(){var n=Object(u.a)(["\n  margin-bottom: 10px;\n"]);return Vn=function(){return n},n}function Yn(){var n=Object(u.a)(["\n  margin-bottom: 10px;\n  display: flex;\n  flex-direction: column;\n"]);return Yn=function(){return n},n}function Hn(){var n=Object(u.a)(["\n  width: 460px;\n  height: 390px;\n  margin: 20px auto 0;\n  padding: 10px 30px 30px 30px;\n  background: whitesmoke;\n  transition: all linear 0.2s;\n  box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);\n  &:hover {\n    transition: all linear 0.2s;\n    box-shadow: 1px 2px 6px rgba(0, 0, 0, 0.5);\n  }\n"]);return Hn=function(){return n},n}function qn(){var n=Object(u.a)(["\n  font-size: 28px;\n  margin: 0px;\n"]);return qn=function(){return n},n}function Gn(){var n=Object(u.a)(["\n  margin-bottom: 10px;\n  text-align: center;\n"]);return Gn=function(){return n},n}function Kn(){var n=Object(u.a)(["\n  margin: 0 10vw;\n  min-height: calc(100vh - 143px);\n"]);return Kn=function(){return n},n}var Qn=g.a.div(Kn()),Wn=g.a.div(Gn()),Xn=g.a.h1(qn()),$n=g.a.form(Hn()),nt=g.a.div(Yn()),tt=g.a.div(Vn()),et=g.a.input(Zn()),rt=g.a.textarea(Un()),ct=g.a.div(Jn()),at=g.a.div(_n());function it(){var n=Object(c.useState)(""),t=Object(o.a)(n,2),e=t[0],a=t[1],i=Object(c.useState)(""),u=Object(o.a)(i,2),s=u[0],j=u[1],d=Object(c.useState)(""),f=Object(o.a)(d,2),O=f[0],h=f[1],v=Object(c.useContext)(b),g=v.isLoading,m=v.setIsLoading,y=Object(l.g)(),w=function(n){return function(t){n(t.target.value)}},k=function(){h(null)};return Object(r.jsx)(Qn,{children:Object(r.jsxs)($n,{onSubmit:function(n){n.preventDefault(),m(!0),function(n,t){var e=x();return fetch("".concat(p,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(e),"content-type":"application/json"},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(e,s).then((function(n){if(0===n.ok)return h(n.message),void m(!1);m(!1),y("/")}))},children:[Object(r.jsx)(Wn,{children:Object(r.jsx)(Xn,{children:"\u65b0\u6587\u7ae0"})}),Object(r.jsxs)(nt,{children:[Object(r.jsx)(tt,{children:"\u6a19\u984c\uff1a"}),Object(r.jsx)(et,{value:e,onChange:w(a),onFocus:k})]}),Object(r.jsxs)(nt,{children:[Object(r.jsx)(tt,{children:"\u5167\u5bb9\uff1a"}),Object(r.jsx)(rt,{value:s,col:"20",onChange:w(j),onFocus:k})]}),g?Object(r.jsx)(at,{children:"Loading..."}):Object(r.jsx)(tn,{children:"\u9001\u51fa\u6587\u7ae0"}),O&&Object(r.jsx)(ct,{children:O})]})})}function ot(){var n=Object(u.a)(["\n  display: flex\n  justify-content: center;\n"]);return ot=function(){return n},n}function ut(){var n=Object(u.a)(["\n  font-size: 36px;\n"]);return ut=function(){return n},n}function st(){var n=Object(u.a)(["\n  width: 600px;\n  height: 400px;\n  margin: 20px auto 0;\n  padding: 20px;\n  background: rgba(210, 210, 210, 0.4);\n  text-align: center;\n  transition: all linear 0.2s;\n  box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);\n  &:hover {\n    transition: all linear 0.2s;\n    box-shadow: 1px 2px 6px rgba(0, 0, 0, 0.5);\n  }\n"]);return st=function(){return n},n}function lt(){var n=Object(u.a)(["\n  margin: 0 10vw;\n  height: calc(100vh - 143px);\n"]);return lt=function(){return n},n}var jt=g.a.div(lt()),bt=g.a.div(st()),dt=g.a.h1(ut()),ft=g.a.div(ot());function xt(){return Object(r.jsx)(jt,{children:Object(r.jsxs)(bt,{children:[Object(r.jsx)(dt,{children:"A Simple Blog"}),Object(r.jsxs)(ft,{children:["\u9019\u662f React SPA \u90e8\u843d\u683c\u7df4\u7fd2\uff5e",Object(r.jsx)("br",{}),"\u4f7f\u7528 React Hooks, Styled Components, React Router 6",Object(r.jsx)(R,{})]})]})})}function pt(){var n=Object(u.a)(["\n  background: rgb(49 49 49);\n  padding: 6px 0;\n  bottom: 0;\n  width: 100%;\n  color: whitesmoke;\n  text-align: center;\n"]);return pt=function(){return n},n}function Ot(){var n=Object(u.a)(["\n  padding-top: 84px;\n"]);return Ot=function(){return n},n}var ht=g.a.div(Ot()),vt=g.a.div(pt());var gt=function(){var n=Object(c.useState)(null),t=Object(o.a)(n,2),e=t[0],a=t[1],i=Object(c.useState)(!1),u=Object(o.a)(i,2),d=u[0],f=u[1],p=Object(c.useState)(!0),O=Object(o.a)(p,2);return O[0],O[1],Object(c.useEffect)((function(){x()&&v().then((function(n){n.ok&&a(n.data)}))}),[]),Object(r.jsx)(j.Provider,{value:{user:e,setUser:a},children:Object(r.jsx)(ht,{children:Object(r.jsxs)(s.a,{children:[Object(r.jsx)(z,{}),Object(r.jsx)(b.Provider,{value:{isLoading:d,setIsLoading:f},children:Object(r.jsxs)(l.c,{children:[Object(r.jsx)(l.a,{path:"/react-blog",element:Object(r.jsx)($,{})}),Object(r.jsx)(l.a,{path:"login",element:Object(r.jsx)(On,{})}),Object(r.jsx)(l.a,{path:"posts",element:Object(r.jsx)(Fn,{})}),Object(r.jsx)(l.a,{path:"post/:id",element:Object(r.jsx)(Dn,{})}),Object(r.jsx)(l.a,{path:"new-post",element:Object(r.jsx)(it,{})}),Object(r.jsx)(l.a,{path:"about-me",element:Object(r.jsx)(xt,{})})]})}),Object(r.jsx)(vt,{children:"Made with \u2764\ufe0f by Nicolas"})]})})})};e(26);i.a.render(Object(r.jsx)(gt,{}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.3124c290.chunk.js.map